function ParticleSystem(){}function step(t){startTime||(startTime=t);var e=t-startTime;e>=500&&particleSystem.animate(),window.requestAnimationFrame(step)}var particleWrapper=Util.documentSelector(".particleWrapper"),particleInfoContainer=Util.documentSelector(".particle-info-container"),particleInfoName=Util.documentSelector(".info-name"),particleInfoTitle=Util.documentSelector(".info-title"),particleInfoLevel=Util.documentSelector(".info-level"),particleInfoLocation=Util.documentSelector(".info-location"),particleInfoSupervisor=Util.documentSelector(".info-supervisor"),particleInfoSupervisee=Util.documentSelector(".info-supervisee"),particleInfoAvatar=Util.documentSelector(".particle-avatar > img"),particleInfoCloseIcon=Util.documentSelector(".close-icon"),pulseRadiusIncrement=0,particleSelected,beatRadius=0,beatCount=0,beatDirection="grow",speed=.005,startTime,firstRun=!0,mouseX,mouseY,coordsArr=[],config={"4A":60,"4B":55,"5A":50,"5B":45,"6A":40,"6B":35,"7A":30,"7B":25,"8A":20,"8B":15},obitalDistance={"5B":400,"6A":300,"6B":300,"7A":200,"7B":200,"8A":120,"8B":120};particleInfoCloseIcon.addEventListener("click",function(t){particleInfoContainer.classList.remove("show")});var dataModel=function(){var t=Object.assign(data),e=0;for(var i in t){var a,n=[],o=new Image(60,60),r=t[i];for(r.location=locationData[r.location],r.supervisor||(r.x=Util.getRandom(100,window.innerWidth-100),r.y=Util.getRandom(100,window.innerHeight-100),r.direction=Util.getRandom(-5,5),r.movement=r.direction/r.totalSupervisee,0===r.movement&&(r.movement=Math.round(6*Math.random())/r.totalSupervisee),r.childAttached=0),r.supervisor&&r.totalSupervisee&&(r.childAttached=0),r.totalSupervisee&&(a=Math.round(360/r.totalSupervisee),r.theta=a*Math.PI/180),r.avatar.length>0?o.src=imagePath+r.avatar:o.src=imagePath+"avatar.png",r.avatarImg=o,e=0;e<r.skill.length;e++){var l=r.skill[e].id,s=r.skill[e].level,c={skill:skillData[l],level:levelData[s]};n.push(c)}r.skill=n}for(var i in t){var h,r=t[i];r.supervisor&&(h=t[r.supervisor],r.index=h.childAttached,h.childAttached++)}return t};ParticleSystem.prototype.init=function(){this.particleCanvas=document.getElementById("particleContainer"),this.context=this.particleCanvas.getContext("2d"),this.particleCanvas.setAttribute("width",window.innerWidth),this.particleCanvas.setAttribute("height",window.innerHeight),this.data=dataModel(),this.thetaArr={},this.superVisorParticle=[],this.superVisorCount=0},ParticleSystem.prototype.drawParticle=function(){var t,e=0,i=(2*Math.PI,0);for(var a in this.data){var n,o,r=this.data[a],l=config[r.level];for(r.supervisor?(t=this.data[r.supervisor],firstRun?(n=t.x+Math.cos(t.theta*r.index)*obitalDistance[r.level],o=t.y+Math.sin(t.theta*r.index)*obitalDistance[r.level],this.thetaArr[r.empID]=t.theta*r.index):(n=t.x+Math.cos(this.thetaArr[r.empID])*obitalDistance[r.level],o=t.y+Math.sin(this.thetaArr[r.empID])*obitalDistance[r.level]),this.context.beginPath(),this.context.moveTo(n,o),this.context.lineTo(t.x,t.y),this.context.strokeStyle="rgba(255, 255, 255, 0.2)",this.context.stroke(),this.context.closePath()):(n=r.x,o=r.y),r.x=n,r.y=o,particleSelected===r.empID&&beatCount<=30&&(beatCount++,beatRadius<=10&&"grow"===beatDirection?(beatRadius++,beatRadius>=10&&(beatDirection="shrink")):(beatRadius<=0&&(beatDirection="grow"),beatRadius--),l+=beatRadius),beatCount>=30&&(particleSelected={},beatRadius=0,beatCount=0),this.context.beginPath(),this.context.arc(n,o,l,0,2*Math.PI),this.context.closePath(),this.context.fillStyle="rgba(255, 255, 255, 0.6)",this.context.fill(),this.context.drawImage(r.avatarImg,n-r.avatarImg.width/2,o-r.avatarImg.height/2),this.context.beginPath(),this.context.arc(n,o,l+7,0,2*Math.PI,!0),this.context.arc(n,o,l,2*Math.PI,0,!1),this.context.closePath(),this.context.fillStyle=r.location.color,this.context.fill(),i=0;i<r.skill.length;i++){var s=r.skill[i],c=(e+2*Math.PI/r.skill.length)*i,h=2*Math.PI/r.skill.length*(i+1);this.context.beginPath(),this.context.arc(n,o,l+14,c,h,!1),this.context.arc(n,o,l+7,h,c,!0),this.context.closePath(),this.context.fillStyle=s.skill.color,this.context.fill(),this.context.beginPath(),this.context.arc(n,o,l+21,c,h,!1),this.context.arc(n,o,l+14,h,c,!0),this.context.closePath(),this.context.fillStyle=s.level.color,this.context.fill()}this.thetaArr[r.empID]+=speed}firstRun=!1},ParticleSystem.prototype.animate=function(){for(var t in this.data){var e=this.data[t];e.nucleus&&(e.x+=e.movement,e.y+=e.movement,e.x>=window.innerWidth&&(e.x=0),e.x<0&&(e.x=window.innerWidth),e.y>window.innerHeight&&(e.x=window.innerWidth-(window.innerWidth-e.x),e.y=0),e.y<0&&(e.x=window.innerWidth-(window.innerWidth-e.x),e.y=window.innerHeight))}this.context.clearRect(0,0,window.innerWidth,window.innerHeight),this.drawParticle()};var particleSystem=new ParticleSystem;particleSystem.init(),particleSystem.drawParticle(),window.requestAnimationFrame(step),document.getElementById("particleContainer").addEventListener("click",function(t){mouseX=t.clientX,mouseY=t.clientY;for(var e in particleSystem.data){var i=particleSystem.data[e],a=Math.sqrt((mouseX-i.x)*(mouseX-i.x)+(mouseY-i.y)*(mouseY-i.y)),n=config[i.level];if(a<=n){var o=particleSystem.data[i.supervisor];particleSelected=i.empID,particleInfoName.textContent=i.name,particleInfoTitle.textContent=i.desig,particleInfoLevel.textContent=i.level,particleInfoLocation.textContent=i.location.location,o?(particleInfoSupervisor.parentElement.classList.remove("hide"),particleInfoSupervisor.textContent=o.name):particleInfoSupervisor.parentElement.classList.contains("hide")||particleInfoSupervisor.parentElement.classList.add("hide"),i.totalSupervisee?(particleInfoSupervisee.parentElement.classList.remove("hide"),particleInfoSupervisee.textContent=i.totalSupervisee):particleInfoSupervisee.parentElement.classList.contains("hide")||particleInfoSupervisee.parentElement.classList.add("hide"),particleInfoAvatar.setAttribute("src",i.avatarImg.src),particleInfoContainer.classList.add("show")}}});